bancor protocol continuous liquidity and asynchronous price discovery for tokens through their smart contracts; aka "smart tokens" eyal hertzog, guy benartzi galia benartzi may draft version the phrase "double coincidence wants" was coined jevons (). "the first difficulty barter find two persons whose disposable possessions mutually suit each other's wants. there may many people wanting, and many possessing those things wanted; but allow actual act barter there must double coincidence, which will rarely happen." table contents table contents the bancor protocol background introducing smart tokens: solution the liquidity problem new method for price discovery use-cases for smart tokens the long tail user-generated currencies crowdfunding project token changers decentralized token baskets network tokens advantages smart tokens the bancor protocol ecosystem solution the coincidence wants problem smart token initiation and customization the bprotocol foundation bancor network token (bnt) the first smart token bnt crowdsale objectives examples and illustrations example smart token transaction flows example token changer transaction flows illustrative map potential bancor network price calculation per transaction summary acknowledgements the bancor protocol abstract: the bancor protocol enables built-in price discovery and liquidity mechanism for tokens smart contract blockchains. these "smart tokens" hold one more other tokens reserve, and enable any party instantly purchase liquidate the smart token exchange for one its reserve tokens, directly through the smart token's contract, continuously calculated price, according formula which balances buy and sell volumes. the bancor protocol named honor the keynesian proposal introduce supranational reserve currency called bancor systematize international currency conversion after wwii. background live world where anyone can publish article, song video, create discussion group and even run online marketplace. are now beginning witness the emergence user-generated currencies. different types stored-value ("currencies" hereafter) have been issued and circulated for centuries the form bank notes, bonds, equity, gift cards, loyalty points, community currencies and others. bitcoin was the first decentralized digital currency, followed wave new cryptocurrencies that have been issued since, and recently we've seen the rise new asset class "tokens" that are typically issued crowdsales ("icos") through smart contracts. however, currencies, which are essentially networks value not connect each other the same way that information networks do. while the switches internet exchange points (ixs) interlink information networks, active traders exchanges are effectively interlinking currencies. the current exchange model for currencies/assets has critical barrier, requiring certain volume trading activity achieve market-liquidity. this inherent barrier makes nearly impossible for small-scale currencies (such community currencies, loyalty points other custom tokens) linked (exchangeable) other popular currencies using market-determined exchange rate. the age smart contract blockchains, tokens can automatically managed immutable code which controls their issuance and behavior. realized this could mean allowing tokens hold balances other tokens (i.e. "reserves"), directly through their smart contracts, that could designed their creators and managed programmatically. these new technological capabilities warrant rethinking the possible solutions for converting one currency another and determining market prices. introducing smart tokens: solution the liquidity problem smart tokens are standard erc tokens which implement the bancor protocol, providing continuous liquidity while automatically facilitating price-discovery. the smart token's contract https://en.wikipedia.org/wiki/price_discovery https://en.wikipedia.org/wiki/bancor https://en.wikipedia.org/wiki/community_currency instantly processes buy and sell orders, which drive the price-discovery process. due this capability, smart tokens not need traded exchange order become liquid. smart token holds balance least one other reserve token which (currently) can different smart token, any erc standard token ether. smart tokens are issued when purchased and destroyed when liquidated, therefore always possible purchase smart token with its reserve token, well liquidate smart token its reserve token, the current price. new method for price discovery smart token utilizes novel method for price-discovery which based "constant reserve ratio" (crr). the crr set the smart token creator, for each reserve token, and used price calculation, along with the smart token's current supply and reserve balance, the following way: rice balance supply crr this calculation ensures that constant ratio kept between the reserve token balance and the smart token's market cap, which its supply times its price. dividing the market cap the supply produces the price according which the smart token can purchased and liquidated through the smart contract. the smart token's price denominated the reserve token and readjusted the smart contract per each purchase liquidation, which increases decreases the reserve balance and the smart token supply (and thus the price) detailed below. when smart tokens are purchased (in any their reserve currencies) the payment for the purchase added the reserve balance, and based the calculated price, new smart tokens are issued the buyer. due the calculation above, purchase smart token with less than crr will cause its price increase, since both the reserve balance and the supply are increasing, while the latter multiplied fraction. similarly, when smart tokens are liquidated, they are removed from the supply (destroyed), and based the current price, reserve tokens are transferred the liquidator. this case, for smart token with crr less than any liquidation will trigger price decrease. this asynchronous price-discovery model works constantly readjusting the current price toward equilibrium between the purchase and liquidation volumes. while the classic exchange model price determined two matched orders real-time smart token prices are calculated over-time following every order. the above formula calculates the current price, however, when purchase liquidation executed, the effective price calculated function the transaction size. the calculation can described every transaction broken into infinitely small increments, where each increment changing the smart token's supply, reserve balance, and thus its price. this ensures that purchasing the same amount smart tokens single multiple transactions would yield the same total price. additionally, this method ensures that the crr will kept constant and the reserve can never drained. essentially, the effect the transaction size the price (due its changing the smart token's supply and reserve balance) incorporated into the effective price for any transaction. the mathematical functions for calculating price per transaction size are presented further this document. using this method, the bancor protocol can enable liquidity and asynchronous price discovery for existing standard tokens through smart tokens holding them reserve, enabling backward compatibility. this use-case and others are described detail below. use-cases for smart tokens the long tail user-generated currencies the long tail phenomena can observed many different online ecosystems such publishing (blogs), videos (youtube), discussion forums (reddit, facebook groups) and more. each these examples, the long tail has become significantly larger scale than everything that preceded it. the forming long tail begins soon the barriers its existence are removed (e.g. youtube making simple for anyone upload and share user-generated videos). there are many examples user-generated currencies, such group currencies (community oriented currencies), loyalty points (business oriented currencies), and the most recent being hundreds cryptocurrencies (protocol oriented currencies). however, the need achieve and maintain liquidity for these small new currencies remains significant barrier for their viability. smart tokens are unique that they can purchased liquidated single party, using the calculated price, removing the need for two opposite wants simultaneously matched this effectively means that using the bancor protocol, small-scale currencies with low expected trade volume can offer continuous liquidity, thus, removing the barrier for them linked the global economy. enabling the long tail currencies likely bring about new generation creative use-cases. though it's improbable predict all them, some the more likely use-cases are listed below. crowdfunding project the crowdfunding space has been growing rapidly. smart tokens can used for crypto crowdfunding initiatives, where the participants receive tokens which are liquid and market-priced. for example, musician may collect funds record album, which would sold online exclusively exchange for the issued tokens. successful album would generate high demand for the tokens, driving their price and rewarding those holding them. many other examples exist such crowdfunding venture capital fund raising initial capital for credit-creating neighborhood currency. https://en.wikipedia.org/wiki/long_tail token changers token changers are smart tokens that hold multiple reserve tokens, with total crr and can used exchange between any standard erc tokens they hold reserve. token changer designed provide exchange service between its reserve tokens through two-step process purchasing the smart token with one reserve token, and immediately liquidating for another. due the price calculation formula, each time reserve token converted reserve token -the price decreases, while the price increases. larger transactions will move the price more sharply, however, higher reserve balance would reduce price volatility. noted, any standard erc token can used reserve-token even already traded other exchanges. such scenario, gap may open between the calculated price reserve token and its price outside exchange. this situation creates arbitrage opportunity which incentivizes arbitrageurs restore economic equilibrium thus keeping the token changer prices sync with the prices which their reserve tokens are traded other exchanges. token changer's creator may set conversion fee that would apply each purchase/liquidation. fees can accumulated the reserves and thus increase the smart token's price with every token conversion taking place, increasing the smart token's value. this increase will benefit the holders the smart token, who may have deposited the original reserves when the smart token was created, purchased with any its reserve token's any time after that. popular exchanges such mtgox and bitfinex have been hacked with hundreds millions dollars worth assets stolen from their accounts. converting one token another using token changer does not require depositing funds exchange and thus removes the counterparty risk from the process. another important benefit that transaction limits need applied, the case with other instant trading solutions, due the decentralized nature the token changer. while decentralized exchanges offer this benefit well, smart tokens not rely trade volume provide liquidity. decentralized token baskets smart tokens can used decentralized token baskets, which function similarly etfs index funds, simply holding portfolio reserve tokens with total crr prices any the reserve tokens rise fall, does the value the smart token. similar token changers, here well arbitrageurs are incentivized realign the conversion rates with market prices which ensures the proper ratios are kept between the reserves according their real-time market value. these smart tokens enable users directly hold asset baskets, without financial services provider intermediary. network tokens collection smart tokens that use the same reserve token form network tokens the common reserve token can described network token which captures the combined value the network tokens which hold reserve. increased demand for any the smart tokens the network would increase demand for the network token, since required for purchasing these tokens, and then held their reserves. increased demand drives the price the network token, which benefits the entire network since the value the tokens' reserves increases, thus maintain the crr, the value the smart tokens also increases. the network token also functions "token for tokens", rendering all the smart tokens the network inter-changeable. network tokens can useful for those who wish create multiple and related smart tokens for different purposes (e.g. regional network community currencies, video game studio with multiple game credits, group independant businesses issuing joint loyalty program). the network token model creates synergetic relationships between the member smart tokens, comparable the way any single successful ethereum service can drive the value ether, benefiting all its holders additional network token use-case interlink set token changers, each holding reserve the network token and second reserve another, standard token. this structure would enable exchanging any token the network another, while increasing the demand for the network token whenever new token changer created appreciates. advantages smart tokens smart tokens introduce multiple advantages over the traditional exchange model: continuous liquidity since purchasing and liquidating done through the smart contract, smart tokens are always liquid, irrespective their trading volume. extra fees the only mandatory fees applied smart token are the blockchain platform fees (gas) which are relatively low. spread since the price calculation done algorithmically the smart token, the same price applies for purchasing and liquidating the smart tokens. predictable price slippage smart tokens allow pre-calculation the precise price slippage, based the transaction size, before executed. lower volatility smart token with crr (for example) comparable exchange with the entire supply token its order-book all times, forming substantial market depth. typical crypto-exchange, the share the supply the market depth any given moment well below the higher the crr, the lower the smart token's price volatility. the lower the crr, the more "new credit" created relative the original reserve amount. the bancor protocol ecosystem different parties can take different roles the bancor network ecosystem. the primary forms participation are follows: end-users can receive, hold, transfer, request, purchase and liquidate smart tokens. smart token creators can issue new, always liquid smart tokens, that may used for trading, token changing, token baskets network tokens. asset tokenizers (e.g. tether-usd, digix-gold) can issue erc tokens representing external assets, thus enabling smart tokens use these assets reserve tokens. (existing crypto-exchanges that operate under their local kyc regulations are well positioned provide asset tokenization services.) arbitrageurs are organically incentivized constantly reduce gaps between prices crypto-exchanges and the bancor network. smart tokens work similarly exchanges that purchasing them increases their price and selling them decreases it, that the same arbitrage mechanics and incentives apply. solution the coincidence wants problem the coincidence wants problem, the current asset exchange model, creates situation where assets are required traded certain minimal volume else face liquidity risk. the cause for this limitation that the chance finding second party with opposite wants exchange with, correlates the asset's trading activity level. smart tokens solve this problem through the use reserve tokens which embed market depth directly into the smart token's smart contract. smart tokens are technological solution the coincidence wants problem for asset exchange rather than labor-based solution used traditional (or decentralized) exchanges. the current laborers asset exchange are the professional market-makers who provide liquidity and facilitate collaborative price discovery. the domains information exchange and trade, the technologies writing and currency replaced labor-intensive solutions (speaking and barter) with technological ones, creating mass efficiencies for societies and unlocking collaboration global and intergenerational level. the bancor protocol proposes similarly advance the domain asset exchange replacing the need for labor with technological solution the existing coincidence wants problem. smart token initiation and customization new smart tokens can created simply depositing initial reserve/s and issuing the initial token supply. alternatively smart tokens can initiated through crowdsale, where part the proceeds allocated the initial reserve. https://en.wikipedia.org/wiki/coincidence_of_wants https://en.wikipedia.org/wiki/liquidity_risk the bprotocol foundation bprotocol swiss nonprofit foundation whose core objective the establishment the bancor protocol global standard for intrinsically tradeable currencies. contributing the bprotocol foundation, users will generate bnt the first smart token deployed using the bancor protocol, establishing the bnt network. the foundation will collaborate with different contractors achieve its goals, well governments, businesses, academia and ngos committed realizing collaboration potential communities around the world. bancor network token (bnt) the first smart token the bnt will hold single reserve ether. other smart tokens, using bnt (one of) their reserve(s), connect the bnt network using the price discovery method outlined this paper. the bnt network will include user-generated smart tokens, token changers (forming global decentralized, highly liquid exchange), decentralized token baskets well subnetworks. the bnt establishes network dynamics where increased demand for any the network's smart tokens increases demand for the common bnt, benefiting all other smart token holding reserve. naturally, also susceptible decreased demand. the bnt will sold fundraiser scheduled for june, gmt. bnt crowdsale objectives portion the funds raised will used the ether reserve for bnt (details the crr will outlined the crowdsale launch announcement), enabling continuous liquidity ether for any bnt holder, well any holder smart token using bnt reserve. portion the funds will used develop, promote and support the open-sourced, blockchain-agnostic, bancor protocol implementations, and support related technologies and applications such open-source, user-friendly web service (desktop and mobile) provide wallet, marketplace, token-conversion, new smart token creation and crowdsale solutions. portion the funds will used set-up and propel the first batch token changers for popular erc tokens, which function decentralized solution for token exchange between all the included tokens. this model introduces key advantages, incentivizing asset tokenizer represent additional real-world assets ethereum tokens. portion the funds will used participate and support innovative and promising future smart token crowdsales the bnt network. these may include new, location-based and vertical-specific smart token initiatives such regional token networks, community currencies, crowdfunded projects and other online offline token-based ecosystems. examples and illustrations example smart token transaction flows this example, crowdsale for new token (bnt) has collected eth. bnt are issued ratio and transferred the crowdsale participants. eth were directed towards funding the bnt project's development and crr) were kept the bnt smart contract reserve. purchasing and liquidating bnt becomes possible soon the crowdsale completed. the opening price the last crowdsale price, this example eth for the first bnt. bnt liquidators get eth from the reserve bnt, the liquidated bnt are destroyed, and the bnt price decreases respectively. bnt buyers get newly minted bnt, their payment eth added the smart contract reserve and the bnt price increases. the eth reserve always remains the bnt market cap. link spreadsheet example token changer transaction flows this example, "bntgno" smart token created function token changer between bnt and gno (gnosis), holding both reserve with crr each, for total crr. assuming current market price bnt gno, the contract can define the initial prices bnt gno bntgno and this example, bntgno are issued the depositors the initial reserves. the opening prices are bntgno bnt gno was set the contract. the bntgno can purchased with bnt gno. the bntgno price will increase for the reserve token was purchased with (bnt gno), and decrease the uninvolved reserve token (due the increase the bntgno supply). bntgno can liquidated back bnt gno, decreasing the bntgno price the liquidated reserve token, and increasing the uninvolved reserve token. this scenario demonstrates how backed smart token with two crr reserve tokens can function decentralized token changer, open for anyone use, with its prices organically balanced arbitrageurs. both the token changer and the token basket automatically maintain their crr ratios. link spreadsheet illustrative map potential bancor network bnt the bnt, backed ether eth, dgd, dgx, rep and gnt are standard ethereum-tokens new new smart tokens created (e.g. crowdfunding campaign, community currency, etc.) smart tokens hold reserves (arrows point the reserve tokens) token changers are backed, and hold two more reserves price calculation per transaction the actual price smart token calculated function the transaction size. reserve token balance smart token supply constant reserve ratio (crr) smart tokens received exchange for (reserve tokens), given and reserve tokens received exchange for (smart tokens), given and mathematical proof available summary the bancor protocol standardizes smart tokens, enabling asynchronous price discovery and continuous liquidity for cryptocurrencies using constant ratios reserve tokens held through smart contracts, acting automated market makers. the bancor protocol enables the creation hierarchical monetary systems with liquidity risk. the bnt will used establish the first decentralized interconnected currency exchange system which does not rely matching bid and ask orders, thus remaining liquid irrespective its trading volume. this system proposes the first technological solution for the coincidence wants problem asset exchange, enabling the long tail user-generated currencies emerge. acknowledgements would like express our gratitude the many people who supported wrote this paper. special thanks meni rosenfeld, yudi levi, amatzia benartzi, ron gross, assaf bahat, sefi golan, joshua alliance, brian singerman, adi scope, dory asher, tal keinan, wings.ai, thefloor, arie ben-david from the israel monetary change movement, scott morris ithacash and the bancor team, ilana, asaf, or, omry, itay and mati. your support and feedback were truly important improving this document. thank you. the mathematical proof available online https://goo.gl/hxqbur