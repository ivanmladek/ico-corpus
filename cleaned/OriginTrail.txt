white paper first purpose built protocol for supply chains based blockchain authors branimir rakic msc tomaz levak, ziga drev, sava savic phd(c). aleksandar veljkovic phd (c). october abstract blockchain technology has huge potential decentralize trust supply chains and bring measurable benefits and value the public and private sectors. unlock this potential, the origintrail protocol was designed purposefully tackle the main challenges which limit the fluent exchange of, and integrity data product supply chains. with supply chain data becoming increasingly fragmented, scalability and cost concerns current decentralized solutions become evident. origintrail unique solution allowing providers supply chains set blockchain supported data sharing multi-organizational environment. helps them build transparency beyond the "one step down, one step up" traceability principle. furthermore, improves the integrity product data and drives efficiencies for stakeholders. the first version the origintrail solution proven and currently deployed the food industry. the upcoming open source version will suitable any product supply chain such automotive, consumer goods, pharmaceutical etc. visit our website: www.origintrail.io table contents .document purpose vision supply chain challenges fragmentation data siloes and opacity supply chains shortcomings current decentralised solutions origintrail first purpose built protocol for supply chains based blockchain automatic data connection and interoperability beyond the "one step back, one step forward" principle ... data interoperability format ... data consensus check tool for trustworthiness origintrail decentralized network the odn data layer odn network layer data input data distribution protocol possible system attacks trace token economics references .document purpose this document was created with the goal positioning origintrail's protocol concept.the protocol was developed based five years experience building solutions enable information transparency supply chains. includes our vast practical experience gained during our work live business cases with new technological possibilities created the blockchain community. despite quick advancement development blockchain, see gap between the advantages blockchain can bring and the actual implementations supply chains seamless and efficient manner. the positive momentum created the blockchain community functions catalyst implement the technology for one the biggest challenges faced the global economy opaque, inefficient and untrusted supply chains. employing the capacity fast growing blockchain networks, origintrail will bring decentralization, interoperability, data and information integrity and trust supply chains. this open source project and definition relies (industry and technical) community feedback grow stronger. origintrail protocol, with certain parts currently centralised, pilot programs europe and china. the results these pilot programs will shared forthcoming documents. you have suggestions comments any the topics whitepaper, you can get touch with our team office@origin-trail.com join our telegram channel you may request whitepapers cases meat, dairy and vegetables sectors www.origin-trail.com some consumer facing instances may found at: perutnina ptuj ltd link celeia dairy ltd link eta kamnik ltd link android mobile application ios mobile application vision you take quick look around your office home,there very high probability that most the objects surrounding you came through some form regional, national global supply chain. the fact that you have very little information with regards how those products made their way you just one the signs that supply chains are facing more pressure transparent.. and most those issues boil down very limited ability share data along the entire supply chain. origintrail changes that with decentralised protocol that tailor made for sharing supply chain data based blockchain. this brings profoundly new way building transparency supply chains. origintrail uses blockchain and builds well established industry standards from and provides necessary foundation build new value increased trust, optimised supply chain efficiencies, automated compliance and enforce quality assurance processes. using origintrail, all stakeholders can securely share their data and keep sensitive data fully encrypted all times. supporting global standards for data exchange (gs, iot, compliance standards), origintrail assures compatibility with existing erp systems, making implementation process quick and efficient. finally, fully decentralised. removes the possibility collusions and introduces full accountability for the data provided. origintrail not company, ecosystem. it's based token economy with direct relations between users and network nodes free arbitrary fees. contribution origintrail ecosystem pledge towards more transparent, collaborative, fair and trusted supply chains. supply chain challenges with the globalization trade there increasing complexity supply chains. this, turn, increases the amount information asymmetry such that information unevenly distributed among participating stakeholders within supply chain. when participating stakeholders have misaligned incentives, such the case which participating stakeholders are different companies, there incentive provide complete information which contributes further information asymmetry. result, end-buyers products have economical way authenticating what they are purchasing, which creates ideal conditions for moral hazard and fraudulent behaviour manifestations such phenomena are the flood counterfeit goods the market (e.g., us$ billion cost legitimate businesses the united states), safety issues, violations labour standards, just name few. stakeholders greatest risk are end-buyers, consumers, the environment, workers and companies involved sustainable production and honest practices. having served our supply chain clients resolving the challenges above for the past five years, have identified two key factors impeding data collection and sharing supply chains: data fragmented. data siloes and low data interoperability exist across the supply chain both multi-organisation and single-organisation supply chains. there crucial technical challenge for various providers for supply chains (software and iot) that need resolved order collaborate and establish full supply chain transparency; there suitable decentralised solution for supply chain data there are solutions that can provide the needed level performance, scalability and trust for interconnected data supply chains while the same time are cost-effective current blockchain and decentralised solutions are prohibitively costly, not provide advanced data relational functionalities, and also have scaling issues. nevertheless, all stakeholders have the same goal being member the chain and improvement the whole process regarding volume and efficiency. http://www.ipwatchdog.com////counterfeiting-costs-us-businesses/id=/ fragmentation data siloes and opacity supply chains the current state supply chain data management solutions involves number localized information systems, erp systems and custom solutions. order for them communicate, custom integrations need implemented. often referred "data silos", these centralized systems lack common technical environment, security, and exchange protocols facilitate data sharing. because this low interoperability data and other technical hurdles (e.g., different security policies, separate infrastructures and environments), useful real time knowledge supply chain product context has not been available interested stakeholders (e.g., consumers, certification and governmental bodies, and operating companies the supply chain). with each stakeholder the supply chain receiving and sending data about product attributes one step back, one step forward trust easily broken and value chains integrity compromised. many organizations today aim bring more order and integrity complex supply chains, including global standard providers supply chains (e.g., gs), certification organizations (e.g. global gap, iseal, rainforest alliance, bureau veritas) and information systems providers (e.g. ibm). yet, none these organizations can ensure entire chain integrity creating stand-alone solution due centralized logic data collection and sharing typically, only parts global supply chains get audited and involved which leads partial data collection, poor verifiability collected data, and eventually diminished trust. the supply chain series separate operations sequence (raw production market), each linked the products supplied them from preceding operation (the one step back down) and the products they supply the next operation (the one step forward). each operator the chain records information which links the separate operations with their own traceability system. each operator responsible only for the stage the chain under their control. shortcomings current decentralised solutions blockchain based, open and decentralized solutions are highly compatible technologies overcome the above mentioned challenges. however, none the current solutions provides high performant functionalities storing, processing and interacting with highly interconnected data that inherent supply chains solutions such ipfs and storj are great for decentralized storage documents, but they fail provide the functions needed for advanced search, cumulative analysis and flexibility handling interconnected data, which the domain professional database solutions. ethereum, iota, hyperledger fabric and similar solutions are not designed for such data storage and manipulation either, and are comparatively more expensive operate than traditional centralised database solutions. finally, bigchaindb provides some database functionalities, though not fitting, flexible model for supply chains, and has different intended use it's permissioned governance model. platform ethereum hyperledger fabric ipfs filecoin storj bigchaindb system type public permissioned public permissioned intended use general purpose virtual machine, smart contracts customizable blockchain framework for closed environments decentralized storage data storage cost high n/a low low database functionalities yes suitable for highly interconnected data file decentralized document database public (open) system allows for anyone enter the network and become participant (node), without the control governing authority. permissioned (also called federated) systems there authority which decides who can participant the network bigchaindb states that the cost indefinite storage origintrail first purpose built protocol for supply chains based blockchain origintrail protocol solution allowing providers easily set blockchain supported data sharing supply chains enables building transparency and tracking beyond the "one step down, one step up" principle, protecting brands from fraudulent behaviour and driving efficiencies for all stakeholders. origintrail brings seamless and automatic data connection and interoperability between systems different stakeholders multi-organisation supply chains, with consensus mechanisms for ensuring integrity data; public decentralized solution for performance, cost and scalability issues providing tailored decentralized system for supply chain data based blockchain. direct users the origintrail are therefore developers creating various supply chain applications using the described protocol. users can third party technology providers (supply chain software companies, erp providers, iot providers, software development companies) in-house supply chain technology teams. applications where origintrail's protocol delivers value are: product authentication, product journey visibility, product recall efficiency, product freshness for perishables, chain custody with accountability, csr activities support, supply chain mapping and optimisation, inventory management, alert systems (exception management), supply chain compliance assurance, customs, audit and regulations process optimisation, and any other supply chain application that requires transparent supply chain starting point. automatic data connection and interoperability beyond the "one step back, one step forward" principle origintrail protocol enables exchange different data sets between multi-organisation supply chains matter its complexity while ensuring the data quality and integrity. input and sharing data with origintrail based common set data standards which allow multiple organizations (companies involved production, distribution retail goods) exchange data beyond the "one step back, one step forward" principle. ... data interoperability format order provide for uniform data flow, all information must standardized within the ecosystem. while the xml widely adopted file format for data exchange, content within the file must also standardized. supply chain can span across the globe, where each member has its own local standards. for example, date and time formats are very different even neighbouring countries. date can the first october one system, and the january another. this defines the challenge that data sent origintrail must standardized, and vice versa. this requires standardization not only the attributes and nodes within attributes xml file, but the content also. origintrail adopts widely used standards. standards support the information needs end users interacting with each other supply chains, specifically the information required support the business processes through which supply chain participants interact. origintrail supports data such as, but not limited to: master data data shared one trading partner many trading partners, that provides descriptive attributes real-world entities identified identification keys, including trade items, parties and physical locations. transaction data trade transactions triggering confirming the execution function within business process defined explicit business agreement (e.g., supply contract) implicit one (e.g., customs processing), from the start the business process (e.g., ordering the product) the end (e.g., final settlement), also making use identification keys. visibility data details about physical digital activity the supply chain products and other assets, identified keys, detailing where these objects are time, and why; not just within one organisation's four walls, but across organisations. origintrail focused the epcis framework because suits the protocol its core foundations. the framework designed be: layered particular, the structure and meaning data abstract sense specified separately from the concrete details data access services and bindings particular interface protocols. this allows for variation the concrete details over time and across enterprises while preserving common meaning the data itself. also permits epcis data specifications reused approaches other than the service-oriented approach the present specification. for example, data definitions could reused edi framework. extensible the core specifications provide core set data types and operations, but also provide several means whereby the core set may extended for purposes specific given industry application area. extensions not only provide for proprietary requirements addressed way that leverages much the standard framework possible, but also provides natural path for the standards evolve and grow over time. modular the layering and extensibility mechanisms allow different parts the complete epcis framework specified different documents, while promoting coherence across the entire framework. this allows the process standardisation (as well implementation) scale. other data sets will include iot and compliance data. this allows for exchanging and tamper-proof recording product properties, which leads accountability and data integrity product supply chains. ... data consensus check tool for trustworthiness when receiving information from stakeholders, origintrail protocol performs "consensus check" that verifies there are discrepancies between data provided different stakeholders. the check performed several steps: step each stakeholder has approved the previous and the following supply chain stakeholder, creating chain accountability. step matching dynamic batch information verified, including the critical information batch identifiers, appropriate timestamps and transactional data. this step involves company private data (e.g. quantities sales), zero knowledge proof mechanism implementation will provide way check that private information matching provable without revealing the information itself. other dynamic data may include data collected from sensors and compliance data. step additional layer credibility, auditing and compliance organisations can validate data supplying their confirmations. cryptography, zero-knowledge proof zero-knowledge protocol method which one party (the prover can prove another party (the verifier that given statement true, without conveying any information apart from the fact that the statement indeed true. this ensures the entire supply chain accords regarding that batch products. there consensus, discrepancies can quickly reported, investigated and reconciled. reconciliation discrepancies also recorded origintrail the additional information uploaded special "reconciliation" data set which again subject the same consensus mechanism. origintrail decentralized network order provide the optimal solution implement the origintrail protocol that runs off-chain decentralized peer peer network, called the origintrail decentralised network (odn). enables peers the network negotiate services, transfer, process and retrieve data, verify it's integrity and availability and reimburse the provider nodes. this solution minimizes the amount data stored the blockchain order reduce cost and inefficiency. origintrail incorporates blockchain the platform ensure data integrity for all the information that gets included the system, tamper proof "fingerprint" cryptographic hash) generated and stored the blockchain the time arrival. the cryptographic hash commonly used prove the received data has not been modified any way, and having the hash immutable blockchain reference the original input completes this mechanism. there need check data was tampered with, simple hash comparison between the stored hash the blockchain and the newly generated hash from the same data odn shows changes have been made. origintrail supports many different blockchain implementations. the current version origintrail utilizes ethereum blockchain provide proof concept and initial implementation, the fully developed solution will provide interfaces many different blockchains. there are multiple reasons for adopting this principle: competing blockchain solutions will evolve unexpected ways, which will influence the pricing blockchain usage, more advanced blockchain solutions the future could integrated, supply chain stakeholders already using blockchain solutions for various purposes will able use the same blockchain for origintrail. top the blockchain layer are two system layers the network and data layers, which combined form the odn system. because computational and storage efficiency, the odn able deliver cost-efficient solution for data integration and manipulation for supply chain stakeholders. the odn data layer the data layer odn takes care all the necessary data management and connectivity functionalities. because the need connect many different data sets across the supply chain, while providing the flexibility support many different connection options, data relationships are the key factor focus the data layer order leverage data relationships the most efficient way, the system needs database technology that stores relationship information first-class entity the technical solution which fulfills this requirement graph database. below comparison different data storage solutions. file storage key-value stores relational databases document databases graph databases (row column based) example file system, redis, riak, voldemort hbase, cassandra mongodb, couchdb ipfs, storj pros neoj, arangodb, orientdb simple simple data mode naturally indexed simple, powerful data powerful data low-cost optimized for simple optimized for model model lookups aggregation scalable optimized for scalable scalable connections easy query cons poor for poor for complex data poor for poor for interconnected less efficient data interconnected foreign keys interconnected data data aggregation data poor for query model limited interconnected data map/reduce for larger queries graph databases provide high performant traversing, high flexibility terms data models and thus high agility when comes development. they are already utilized enterprises like walmart, ebay, the adidas group and many other companies for various use-cases involving online retail. furthermore, supply chain information inherently graph-like, both terms the flow products well connections that this data forms. using decentralized graph database therefore what provides great conditions for: interoperability, graphs can extended and modified easily with low operational cost high performance, graph databases are great for quick traversal and connection forming high availability, because distribution each specific product supply chain presented with it's own graph. once data inserted, can longer changed only additional information can added the graph. every time new data introduced the graph, new graph fingerprint (cryptographic hash) created and stored the blockchain layer. this allows for versioned graph, where each step the graph growth can later verified for credibility against the immutable fingerprints present the blockchain. important acknowledge that graph databases, with all their strengths, are not silver bullet for every possible data processing scenario. are currently experimenting with several different graph dbs, which some are multi model databases that would allow for even more data manipulation flexibility i.e. more efficient cumulative analysis. also important restate that these data processing scenarios are not the main problem origintrail aiming solve. odn network layer the network layer takes care the accessibility and data governance the underlying data layer. consists network nodes which all contain parts the decentralized database and store graphs the data. access the data achieved through the provided data exchange api. the peer peer network built distributed hash table based kademlia which responsible for efficient routing within the network. the messages between peers are signed, while the kademlia node presents valid ethereum address which the node able spend from. this enforces long-term identity and helps with kademlia routing and eclipse attacks. the network distinguishes between two types nodes regards their interaction with supply chain data data creators (dc) and data holders (dh). important state that and nodes are the same terms their system capabilities, but are rather viewed differently the context the data they hold the system regard specific supply chains. data creator node responsible for injecting supply chain data into the network and replicating over specific number data holder nodes. this distinction comes form data governance decentralization for each supply chain, additional number least nodes that are involved specific nodes are selected keep the specific data replicas. all these nodes keep copy the data graph their local databases data creator also data holder), total this means that the minimum odn replication factor where the number supply chain involved nodes. this way the system attempts ensure that the nodes are always outnumbered the nodes minimize the possibility collusion between supply chain actors who might have interest changing incriminating piece information inside the supply chain data graph they have assembled. data input introduce data set into origintrail standardised interface format utilized, either via web service via xml file provided the origintrail importer (new implementations the file importer can created separately allow other formats needed well this the domain service providers developing solutions top origintrail). both mechanisms input have been tested and improved upon production environment since the initial centralised version origintrail has been set once new data set introduced node, performs: the initial data format check regards both syntax and semantic errors (regarding data standards). case error reported back the importer log and through the web service response following the check, the data set converted into graph form the database, called the proto graph, which identified uniquely the product and batch identifiers the node then attempts introduce the new graph the network via the data distribution protocol successful, the data will get merged into the master graph the product supply chain, while being validated via consensus check and fingerprinted the blockchain layer definitions for further reading vertex graph node; ordered pair node identifier graph node set and data contained the set graph vertices relation graph edge, relation; ordered tuple connecting nodes and key-value pairs set graph set node set graph edges; relations between the nodes supply chain graph; tuple sets and and graph owner identifier set supply chain graphs stored data node network node with set set network nodes set set node public keys which operates the graph set set data distribution protocol when node requested upload supply chain graph information product that contains the first checks the blockchain layer see there are any nodes storing the master graph data product the nodes are not found, request for storage service their supply chain graph data for product proposals are received from data holder nodes, proposals, where sharing. when service nodes with the best the number actors involved the origintrail supply chain data notifies every selected node where acceptance and encodes supply chain graph after encoding selects broadcasts about the proposal sends the encrypted graph initial proof storage test for node proposal. each node with the encoding function and performs initiate the service according the accepted then includes hash fingerprint the received decrypted graph the blockchain layer for data integrity proof. there already are data nodes storing the fetches graph node, decodes with the same key used for encoding with the hash from selected data and checks the compliance stored the blockchain layer. the check successful, performs the consensus check between graphs existent), which are part and corresponding and then (if when supply chain data consensus check successfully completed for new connected graph broadcasts the graph the node stores the newly formed graph hash other selected nodes which perform the same algorithm, except further propagating through the network. the result that each the and the additional node all keep the same data graph computed data fingerprint hash the blockchain layer. and the function enc function the node's address (public key) and current time nodes, with their own reading data from origintrail involves requesting the information from node with specific set input information depending product identifiers and potentially many other parameters (such batch ids, timestamps, industry specific information, unique product packaging identifiers, sensory information etc). data node which has received read request for specific subset data involving first checks for the location nodes holding the blockchain layer. case the node itself the dh, responds with the data immediately from their local database, otherwise forwards the request the closest node the network that does hold the requested information. possible system attacks sybil outsourcing attacks creating multiple (sybil) identities would theoretically allow for malicious nodes pretend store more copies the same data, but having them stored only once and quickly fetched from the storing location when required prove they are providing the service. this issue addressed establishing similar mechanism the proof-of-replication introduced the filecoin whitepaper applied graphs, with the consideration that the data origintrail public design. with these preconditions place, encryption used prove replication and not used obscure data the data creator encrypt the input information they require obscured before inputting data into the system. therefore, each node storing specific encoding origintrail required periodically prove that they are the graph where each encoding distinguishable and incompressible. the encoding function has slowable prp (pseudo-random permutation) with cipher block chaining that is: slow enough that easy distinguish the time between honest and malicious response, the attacker would need first encrypt and then transmit through the network arbitrarily tunable terms running time, running where the number times each graph element encrypted before proceeding the next (sequential encryption where the result each encrypted element input for the encryption the next element) and the number elements the graph publicly verifiable, which achieved using unique cryptographic key based the node public key has quick inverse decode function that decoding can done quickly (with parallelization the attack attack usually defined ability control overwhelmingly large amount (at least power decentralized system (i.e. hashing power ethereum), which then grants the ability manipulate data. terms data integrity origintrail, such attack not problem for each graph deterministically verifiable that the data hasn't been changed comparing the hash extracted from the node with the cryptographic fingerprints the blockchain layer. additionally, nodes are incentivised store its proper form order able prove storage and receive compensation. node fails provide proof retrievability replication, can easily substituted another node the system the data creator. byzantine faults byzantine faults are defined faults caused nodes deliver supply chain graph data either being unavailable having incorrect data response. incorrect response defined response that cannot validated appropriate hash fingerprint the blockchain layer origintrail. because the datan governance consensus replicating the graph data data holder nodes (where the number distinct supply chain data creator nodes), the probability failure deliver the requested data significantly diminishes with the number involved nodes the exchange. when node fails deliver service for required period time, the data distribution protocol used find new candidate node and replicate the data keep the required number copies the network. eclipse attacks isolating node multitude them from the network having all outbound connections reach malicious nodes called the eclipse attack. this addressed using public key hashes node ids kademlia. eclipse node the network the attacker has generate key pairs that position themselves closer kademlia the targeted node than it's nearest non-malicious neighbor, well maintaining that position when new nodes join with closer ids. this problem grows complexity more nodes are introduced the network and essentially presents form proof-of-work problem. hostage data attacks malicious node might refuse deliver certain graph data order extort data owners for additional tokens. this possibility mitigated replicating graph data across multitude nodes. trace token economics origintrail ecosystem enabled the tokenisation data exchange and supply chain processing functionalities. the system consists network machines (nodes) that are all running origintrail full software clients. their supply met the demand users the protocol (supply chain data producers and consumers) that wish share supply chain data using origintrail. the trace token the means compensation between supply chain data producers and data consumers one side and the origintrail node holders the other. provides the incentive the nodes the peer peer network perform the system functionalities. maintaining and operating the network takes resources: time, electricity, computing power, storage space and communication bandwidth. therefore, origintrail nodes are incentivised two groups tasks: data processing supply chain consensus checks, data quality and replication checks storing, managing and delivering the data graph form write (introducing new supply chain information origintrail) and storing operations are performed nodes for which they receive the compensation trace tokens based the agreement reached, regards the data distribution protocol mechanism described this document. important note that origintrail uses blockchain layer which presents independent system and thus adds additional cost depending the chosen underlying blockchain for some origintrail functionalities. case ethereum being the underlying blockchain, this means that small amount gas (ether) also needed store the necessary hashes ethereum for the storage operation. read operations are also compensated with trace tokens. exception where read operations can free cost certain conditions are met: one has access i.e. ethereum node for free reads from ethereum (or another chosen blockchain from the blockchain layer), and they hold local origintrail node which contains the necessary graphs. the amount tokens awarded for the nodes providing the service function supply and demand between nodes and users. data creators will not required pay any additional arbitrary fees apart from what they agree pay the nodes. the other side, nodes will receive full payment what they have agreed with and provided the user. the trace token implemented erc compatible token ethereum. this ensures interoperability with wallets and other tokens ethereum. the trace token smart contract handles all transactions and balances secure and trusted manner. there emerging erc token specification which improves the erc standard and lowers the cost token usage approved standard the time token sale, might become the preferred solution for the trace token references epc information services (epcis) standard sept. zcashco what are zk-snarks https://z.cash/technology/zksnarks.html eli ben-sasson, alessandro chiesa, eran tromer, madars virza succinct non-interactive zero knowledge for von neumann architecture, may ian robinson, jim webber, emil eifrem graph databases, edition new opportunities for connected data, june o'reilly media neoj why graph databases? https://neoj.com/why-graph-databases/ petar maymounkov, david mazieres kademlia: peer-to-peer information system based the xor metric protocol labs filecoin: proof replication https://filecoin.io/proof-of-replication.pdf protocol labs filecoin: decentralized storage network https://filecoin.io/filecoin.pdf