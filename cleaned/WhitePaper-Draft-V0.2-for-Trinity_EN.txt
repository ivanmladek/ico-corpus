trinity white paper universal off-chain scaling solution (exposure draft) table contents abstract ......................................................................................................................... ii. background ................................................................................................................... iii. overview ........................................................................................................................ iv. technical implementation ........................................................................................... proof assets(poa) ............................................................................................. smart contract ........................................................................................................ statechannels ......................................................................................................... iv. life cycle the channel ........................................................................... channel network ...................................................................................... off-chaintransactions .......................................................................................... direct transaction ..................................................................................... router transaction .................................................................................... tokenintroduction ..................................................................................................... function and valueof tnc .................................................................................. tokendistribution ................................................................................................ team ........................................................................................................................... teammembers ...................................................................................................... advisors ............................................................................................................... vi. risksanddisclaimer ................................................................................................... viii contact ................................................................................................................... abstract while the blockchain technology lauded for its ability reshape our economy and world, are also concerned about its slow consensus building process, high transaction cost, and weak anonymity. trinity adopts state channel technology off-chain scaling solution for neo. providing series solutions, such protocol layer, pluggable services, customizable services, free basic services, and incentives for value-added service providers, trinity offers convenient, fast and safe blockchain services users. ii. background the birth the blockchain marks the beginning establishing truly trustable internet. the blockchain technology creates internet with value uniqueness and transmission, which essence, realize the trustable flow asset value. the blockchain freeing from intermediaries different industries, clearing/settlement agencies and centralized services providers, thus changing the world gradually. the blockchain technology not single innovative technology, but integrated technology system that gathers research outcomes from different fields, which consensus mechanism indispensable core technology. due limitations such hardware, bandwidth, node number, node distribution and consensus algorithm, consensus building the blockchain usually takes tens seconds even minutes, which poses great barrier the landing commercial blockchain projects. due the limited data structure the blocks, spatial resources the blocks are rare and very expensive. putting unnecessary instructional operations non-settlement intermediary data the blockchain leads high cost and places huge burden synchronizing with the network. data the blockchain public all users, storing all data and processes the blockchain poses great threat user privacy. solve the above problems, the lightening network was created for bitcoin and the raiden network was created for etherum. this projects universal off-chain scaling solution. iii. overview trinity off-chain scaling solution for neo and applicable blockchain transfer neo utox and nep- standard tokens. trinity achieves real-time payments, low transaction fees, scalability, and privacy protection neo assets through state channeltechnology. trinity aims provide safe, fast and convenient blockchain services its users through its fast and safe off-chain payment channels. trinity overall framework follows: dapp channel service layer (csl) channel network layer (cnl) state channel layer (scl) block layer (bl) trinity, blockchain and trinity's logic layers are completely decoupled from each other. each them can serve dapps independently. dapps deployed the trinity network may, according their business needs, use the api any trinity's logic layers secure corresponding services available such layers (as shown figures carry out on-chain transactions without using any trinity services (as shown figure the state channel layer (scl) provides trinity with the most fundamental state channel services. state channels are established transaction parties put their assets collaterals the blockchain and establish smart contract endorse subsequent off-chain transactions. the services available the scl enable transaction parties carry out instant transactions with latency. scl services are applicable dapps for instant payment, personal high-frequency data collection, among other scenarios. the channel network layer (cnl) provides trinity with state channel routing services, i.e. fully automatic intelligent routing for transaction parties without established state channels. all the state channels correspond smart contract the blockchain and asset collateral. not feasible for all users establish state channels with all their counterparties due asset collateral costs. thus, trinity's routing services are requisite for unperceived state channel routing which allows transaction parties transact real time with latency. cnl services are applicable dapps for bb/bc instant payment, network-wide data collection, decentralized exchanges, instant exchange between coins, iot networking, among other scenarios. the channel service layer (csl) provides trinity with plug-in customizable offchain transaction services. the channel atomic layer (cal) and the cnl function jointly make on-chain assets flow fast off chain trinity aims "good and fast". the csl designed improve users' transaction experience. dapps may acquire personalized services through custom implementation themselves customization trinity the csl transaction needs vary per industry, asset and stake. common services available the csl include: gateway services for light clients, mix-coin transaction services with privacy protection, high-priority quality service (qos) routing for state channels, peer-to-peer connection-oriented state channel routing, channel detection proxy service, etc. that trinity and the blockchain layers are completely decoupled from each other lays solid foundation for trinity's subsequent moves blockchain transplants and crosschain transaction services. iv. technical implementation proof assets(poa) poa, equivalent settlement reserve fund, key factor off-chain scaling solutions. achieved through digital signature and hash lock, that's say, transactions are performed with mainnet digital assets collaterals. the graph shows two traders: alice and merchant. poa means they lock their mainnet tokens collaterals form poa. for example, alice has neo nep- and merchant has neo nep-. before off-chain transfers, alice and merchant lock certain number tokens proof assets. without poa, token transfers cannot performed. poa binding protocol implemented the neo blockchain. digital signature ensures that alice and merchant stay the value transfer. also, only alice and merchant have access tokens the smart contracts the payment channel, trinity poa binding mainnet transactions. once mainnet tokens are locked, poa formed. then and can conduct off-chain transactions immediately through payment channels without time limits. when the transactions are finished, assets can transferred back the mainnet and the balance registered the mainnet. however, off-chain transactions will not recorded. put other words, the number transactions and the amount each transaction will not broadcast the entire network protect user privacy. smart contract on-chain smart contracts have the following main functions: determining transaction rules agreed and shared between transaction participants issuing transaction tokens guarantee off-chain payment smart arbitration: case breach either party, the smart contract can function impose fair punishment the breaching party. channel management and closure channels: transactions are executed off chain, but the balance recorded chain. channel smart contracts are executable code incorporating shared rules for operating off-chain payment channel. when using the channels, each participant agrees those rules implicitly. the channels allow: large volume two-way value transmission between participants conditional value transmission with expiration and pre-defined rules rules that determine the sequence transfer user blockchain channle contract trinity open channel requst verify create channel lock assert verfiy signature create channel channel created channel response each channel supports two-way off-chain payment channels and has their own settlement cycles. both participants transaction can store any amount deposits for any number times. transactions may completed under certain conditions, meaning there might several fast transactions waiting for completion any time point. the transactions are represented lock structure that includes numerical values, expiration time and hash lock. set all unimplemented transactions encoded merkle tree and represented its root each transaction. channel capacity the total amount deposits the two participants transaction. the capacity represents the maximum amount transactions and the total amount assets involved unimplemented transactions. the capacity divided into two parts: disposable balance and locked balance each participant. the disposable balance changing with the direction and value completed transactions during the life span the channels, and will increase with deposits the corresponding participant payments the counterparty. the amount the locked balance depends the direction and value locked transfers unimplemented transactions, increasing with each locked transfer and decreasing transfer and payment succeed other means. participant's balance= deposit received amount paid amount bn=pd+pr-ps locked balance total amount unimplemented transactions bl=sk= after development, the channels are likely receive multiple deposits from any participant. once confirmed the counterparty, the depositor can carry out transfers with the disposable balance. channels are subject closure case either participant intends cancel the transaction any disputes arise, after which the settlement window opens for the corresponding participant update the status the counterparty and revoke the unlocked lock. neither participant allowed carry out partial revocation. the operation transaction update receives signed poa which includes data packet with channel specific like merkel tree root, transaction amount, and transaction sequence. the node can only provide information about the signature the counterparty, know the data not tampered, and valid. prevent the node from providing outdated information, the amount withdrawn deducted from the amount transmitted, which monotonic increasing value. therefore, there should transaction carrying negative value; any participant providing outdated information will see his/her net balance decrease. another channel operation revoking the lock, i.e. receiving the proof unlocking that made lock data structure and proves that the lock included the merkel tree and there available password unlock it. the channel recalculates merkel tree root and verify the password verify the lock. all such verifications are passed, the amount transferrable the counterparty will increase. state channels trinity uses on-chain smart contracts authenticate participants, lock/unlock deposits and resolve disputes for state channels management. off-chain transactions are made possible through trinity's off-chain protocol. transection has the channel request peer jion the channle blockchain channel contract participants the channel timeout transfer off-chain life cycle the channel during the life cycle, tokens are locked ensure they can only sent and received the channel until closed avoid double-spending. once the channel developed, participants can check and verify its existence. each counterparty does not need check all records, but only track the updates. poa includes the final total amount transfer the trinity network sent the participants, and signed digitally the sender. one participant decides settle the assets the blockchain, he/she can require the payment the other participant pay the unpaid assets. the participant can submit transaction request through smart contracts select poa and close the payment channels. the other participant who hasn't closed the channels must provide the poa. transfer occurs, the operation not needed. after poa submission the participants, they can withdraw their tokens. one them hasn't submitted the poa time, the assets will determined the poa the participant who requests closure. the above graph shows the entire lifecycle trinity network payment channels. channel network the development and settlement payment channels must conducted the blockchain. therefore, impossible create new channels for each potential target. trinity solves the problem through the development payment channel network where participants are connected with each other. shown the graph above, wants send cryptocurrency must find network channel connect each participant the route needs cooperate with each other that can transfer tokens the participants transfer tokens the next node through payment and rent the channels encrypted hash lock prevents crediting the intermediary transfers until confirms receipt a's tokens. once decides unlock and pay, she sends the key each participant the route who unlocks their payment gets incentives, the private key will returned alice through the channels. all locked transfers can traded the mainnet through alice's private key. however, the participants had better integrate the locked transfer value form standard poa. poa that includes locked transfer value and invalid lock can synched the state channels. this way, transfer among multiple participants can done. counterparties the network will not open their channels for free. after all, transfer will result extra network traffic and imbalance payment channel. therefore, participants the trinity network pay for renting the channels, and the fees they pay will encourage the payment channels more balanced. off-chain transactions all off-chain transactions need programmed based the format the poa ensure consistency and safety channel communications. the information includes: transaction sequence the number transfers suspend merkle tree root node signatures that include the above information trinity provides the following two off-chain transactions: direct transaction router transaction direct transaction direct transaction doesn't rely locks, completed automatically after successful sending network data package. the transmission runs asynchronous network, cannot completed atomic manner. the keysto direct transaction are follows: unlocked information means that the number messagesconveying information will continue increase, and there may messages transaction cancelation. that's say, the payer will pay for the transaction unconditionally regardless whether services are received. the payer must assume that the transaction completed when messages are sent the network. successful direct transaction only needs messages: transaction message and confirmation message. for example, alice wants pay assets bob. first, alice creates new transaction message. alice signs the transaction and sends bob, and the transaction completed. router transaction router transaction usually used channel network with initiator, trader and many intermediate nodes. ensure privacy and immutability transactions, the intermediate transaction designed transaction with hash lock which contains transaction figures. the lock also used verify the cipher text unlock and its maturity. another example alice and bob. alice wants pay assets bob. first, alice creates new transaction message. alice signs the transaction and sends bob. bob sends secret request message alice request cancel the transaction. alice sends the cipher text bob and assumes the transaction completed then. bob receives the cipher text and has assets transacted him. bob sends message with the cipher text alice, stating aware the codes and request off-chain synch. alice sends cipher text bob notify him that the lock will removed from the merkel tree, and that the amount transaction and tree root will updated. alice hop bob signed transection signed transection secretrequest secretrequest assume_transection_com revealsecret mplete revealsecret revealsecret save_transection_value_to_asset secretmessage secretmessage confirm_secret request_synch confirm_secret request_synch secretmessage confirm_unlock request_synch secretmessage confirm_unlock request_synch remove_lock update_assert update_merkel tree update_assert token introduction the core the tokenized economy incentivize the ecosystem with tokens. trinity also needs incentive system achieve high efficiency. tnc (trinity network credit) used credits balance state channels trinity network. function and value tnc the core trinity the state channels. order involve more users and form micropayment eco-habit, state channel itself free, that is, trinity available for users without tnc. the feasibility trinity requires cooperation with many participants, while tnc serves incentive and balance. tnc use cases: unified asset for network settlement tnc can but not required used mortgaged asset during channel establishment, provide unified settlement method. such, the tnc could the most direct and convenient way those small and medium sized nodes users unwilling unable synchronize resources the entire chain. this unified settlement mechanism helps reduce unnecessary exchange costs for on-chain and off-chain transactions. trinity network contribution reward trinity provides channel routing improve transaction convenience throughout the entire network. the channel routing enables effective state interactions and value transfers between users/nodes through the channel, which makes the trinity network more flexible and convenient. the tnc can reward the channel routing providers effective manner, which encourages more nodes/users participate the network channel and enables more efficient asset flows. trinity network value-added services privacy-conscious network, trinity adopts multiple technologies like zeroknowledge proof and coinjoin protect data security and enhance privacy protection for users. moreover, the trinity network can provide further privacy protections which can acquired through tnc payment. other services provided trinity include qos, connection-oriented channel routing, thin client gateway services, proxy services state channel testing and monitoring among other value-added services. dapp developers are able customize value-added services trinity's channel service layer. these services will available for all trinity users paying tnc developers. network servicefees the trinity network devoted providing digital asset services for small and medium sized businesses. small and medium sized businesses using the trinity network distribute manage digital assets can use tnc pay for the needed services. enterprise customization servicefee businesses requiring customized services like independent state channel modes and highly customized wallets shall pay for those customized services tnc. incentives for tnc holders and community developers for developers who are constantly concerned about and supporting the trinity community, trinity reward them with tnc tokens. such incentives aim encourage more talents develop the trinity community and keep improving trinity protocols. tnc holders will rewarded set the following chart, bid motivate more contribute trinity network development. with the evolvement the trinity network and more participation, tnc will show more values increasing use cases. token distribution note the first time tnc distributed its donors, part# and part# will available the tnc neo smart contract rich list for supervision the community. note: all donors, either through private public round, will donating based the same exchange rate neo. there discount for private donors. note: distribution part# will explained great detail future documentations. this moment, the trinity foundation considering the option setting automated distribution these tnc state channel operators, promoters and community contributors. but for sure means will part# distributed all the incumbent trinity foundation directors team members. iv. team team members david yiling founder the former neo overseas manager, responsible for the neo token global sales, community building, commercial cooperation and ecological construction,etc. the co-founder fourier pr,which one the top crypto-economy project and consultancy enterprise china. fourier also cooperate with fbg and its clients dominate the top list coinmarketcap. the founder rai stone. guangfeng zhang co-founder expert security and blockchain. guangfeng has more than years experience technology development. has worked the giesecke+devrient (china) and cbpm (china banknote printing and minting corp) blockchain research institute, engaged the formulation and promotion the pboc specification, the design the digital ticket trading platform based digital currency and blockchain technology. fengping co-founder government affairs specialist blockchain, rich experience public sector and blockchain business development. joined china ethereum community and had been working blockchain industry's affairs with the government. former government official responsible for business development. former director government affairs shanghai onchain technologies ltd. former vice director tongji university fintech and blockchain research institute. responsible for helping the company join the miit blockchain reference architecture building and policymaking. participation guiyang municipal government's credit farmer project, which seen the very first government-sponsored blockchain application nationwide. will wei core dev and i&v specialist, years' experience technology development. software development, i&v specialist and test automation coach nokia. initiator groomingrobot project natural language processing based automation testing tool) blockchain fan, hyperledger fabric technology document translation gitbook. advisors co-founder badwater capital digital currency fund), early supporter rpx, cpx, ven, req, zrx, etc. worked for dfj dragon fund well-known venture capital fund silicon valley and china) tmt venture capital. his startup projects were invested idg and were purchased studied indiana universitykelley school business and draper university silicon valley. zhoudong blockchain expert former blockchain expert fortune company (wanda), deputy secretary-general blockchain industry development forum miit. participated the draft miit white paper and the development relevant standards. wrote blockchain development guide and other professional books. yanbo former senior r&d engineer and technical director qualcomm and redpoint positioning linux kernel network subsystem code contributor, specializing architecture design distributed network system and implementation mesh network protocol. currently charge management onchain beijing office and development open source blockchain platform--distributed network architecture. studied under dan boneh standford and has outstanding background cryptography vi. risks and disclaimer this document only for sharing relevant information specific readers asking for information the project, and shall not construed either guidance for future investments contract/warrant any kind. those who choose participate the token distribution plan shall deemed have understood and accepted the risks associated with the project and have agreed take full responsibility for their participation. the project team explicitly claims that neither provides guarantee returns nor takes responsibility for any direct indirect losses arising from the project. the token involved the project encrypted code used transaction process, rather than representation any equity, right earnings right control relevant the project. digital currencies carry high uncertainties, including but not limited different regulatory regimes various nations, industrial incentives/competitions, and technical flaws digital currencies. such, provide guarantee for the success the project. fact, the project involves risk failure, and even nullification the token. the project team will make efforts fix the problems that likely occur its development. nevertheless, the project still under policy uncertainties. thus, you are advised have comprehensive understanding the blockchain and the associated risks before making investments. viii contact website:https://trinity.tech/ email: support@trinity.tech telegram: https://t.me/trinitystatechannels